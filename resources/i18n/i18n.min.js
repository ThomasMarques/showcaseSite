/*
 * My own i18n with javascript
 * (Licensed under MIT)
 */
function createCookie(e, t, n) {
    var r;
    if (n) {
        var i = new Date;
        i.setTime(i.getTime() + n * 24 * 60 * 60 * 1e3);
        r = "; expires=" + i.toGMTString()
    } else {
        r = ""
    }
    document.cookie = e + "=" + t + r + "; path=/"
}

function getCookie(e) {
    if (document.cookie.length > 0) {
        c_start = document.cookie.indexOf(e + "=");
        if (c_start != -1) {
            c_start = c_start + e.length + 1;
            c_end = document.cookie.indexOf(";", c_start);
            if (c_end == -1) {
                c_end = document.cookie.length
            }
            return unescape(document.cookie.substring(c_start, c_end))
        }
    }
    return undefined
}


var value;
var json_data = new Object;

function changeLang(lang) {
    if (value == lang) 
        return;
    value = lang;
    $(".i18n").each(function() {
        $(this).html(
            json_data[value][this.getAttribute("i18n-key")]
        );
    });
}

$(document).ready(function () {
    {
        $.getJSON("i18n-data.json", function(data) {
            data.forEach(function(entry) {
                json_data[entry.lang] = entry;
            });
        });
        value = getCookie("lang");
        if (value == undefined)
            value = "en";
        else if(value != "en")
            changeLang(value);
    }
    $(".i18n-language-selector").click(function (e) {
        changeLang(this.getAttribute("value"));
    })
})